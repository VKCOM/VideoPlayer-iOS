## CHANGELOG

#### OVKit 4.16
- [tvOS] Поправлен баг с перемоткой стрелочками, теперь одно нажатие перематывает на 10с.
- [tvOS] Исправлены баги перемотки
- [tvOS] Добавлен `panGesture` который срабатывает на горизонтальный скролл на пульте, действие показывает контролы.
- [tvOS] Добавлен метод `togglePause` для единой точки переключения паузы.
- [tvOS] Поправлен дизайн ThumbnailView для tvOS
- Удалены контролы ленты (FeedViewControls).
- [tvOS] Поправлен баг с паузой при отмене перемотки

#### OVKit 4.15
- Запрет использования zoom для gif.

#### OVKit 4.14
- Исправлен лишний сброс AudioUnit, который происходит без смены устройства.
- Добавлен `vsid` в параметры рекламного плеера.
- Исправлено обновление `contentType` в `StatsContext`.
- Минимальное качество рекламы установлено в 720p.
- Качество рекламы подстраивается под пропускную способность сети.
- Параметр enableChannelCountAlign удалён.
- Исправлена работа метода PlayerView.changeVideo(to:).
- Переименовано событие для zoom (onVideoZoom1x -> video_zoom_1x).
- Добавлен параметр processor_count в тогл vp_webm_av1 для ограничения девайсов по кол-ву ядер.

#### OVKit 4.13
- Исправлен статус доступности системного PiP при изменении состояния звука.
- Добавлен отдельный метод для смены видео в плеере
- Исправлена потенциальная утечка окна PiP.
- Обновлен нейминг в Environment: forceShowDiagnosticsView -> autoShowDiagnosticsView
- Добавлена статистика для video zoom.
- Немедленная отправка actionStop.
- При ручной постановке на паузу StatsContext убирает флаг autoplay.
- Добавлена проверка активности зума перед его обновлением.
- Исправлено падение при использовании SupplementaryController.

#### OVKit 4.12
- Редизайн плашки с диагностикой, возможность перемещать её и копировать её информацию
- Исправлена совместимость параметров аудиосессии.
- Исправлена потеря событий при отправке в Единую Статистику.

#### OVKit 4.11
- Добавил в `PlayerView` поле `isFinished` (проксируется из `Assembly`)
- Добавлена поддержка своего размера PiP на iPad
- Исправление работы контролов на проводных и беспроводных наушниках. 
- Показ фреймдропа в оверлее диагностики.
- Статистика: улучшение подсчета watch coverage  для трансляций.
- Статистика: отправка watch coverage после постановки на паузу.
- Исправлено позиционирование окошка PiP на iPad при поворотах экрана

#### OVKit 4.10
- Переключение на `VideoFileFormat` приоритетом ниже при ошибке воспроизведения.
- Поддержка `dash_uni` ссылок.
- При закрытии системного PiP, внутренний тоже закрывается.

#### OVKit 4.9
- Сворачивание в системный PiP отключено во время скринкаста.
- Исправлено воспроизведение видео на Chromecast после сворачивания приложения.
- При сворачивании в PiP его контролы теперь видны некоторое время.
- Исправлено закрытие fullscreen при переходе в PiP.

#### OVKit 4.8
- Добавлено свойство `isPlayingAd` для отслеживания состояния проигрываемой рекламы.
- Возможность установить кастомные контролы для fullscreen и PiP.
- Зум видео при выходе из фуллскрин (VP-1131)
- Изменена логика isEnabled для ZoomBehavior.
- Исправлен фриз картинки в системном PiP после быстрого сворачивания и разворачивания приложения.
- Более стабильный механизм активации внешнего Picture in Picture.
- Добавлена поддержка `tvOS`.
- Минимальная версия tvOS 15.2
- Моргание timeline из-за неверного расчёта isRewindedLive.
- Исправлена критическая ошибка при отображении рекламы формата Shoppable.

#### OVKit 4.7
- Zoom бейджик исчезает через две секунды после последней операции.
- enableBackgroundPlayback удалён.
- В список форматов для префетча добавлен av1.
- Обновление состояния кнопки gravity при переходе landscape <-> portrait.
- Увеличенная картинка в pip. (VIDEO-23464)
- Исправление падения во внешнем Picture in Picture.

#### OVKit 4.6
- Обновление интерфейса создания кастомных ковров.
- Добавлено свойство splitMode в протокол полноэкранных контролов.
- Улучшения подсчета quality в статистике.
- Добавлена кастомизация поведения кнопки закрытия плеера в редизайне контролов дискавера.
- 5.218 api version.
- Параметр enableAudioTimeCompensate удалён.

#### OVKit 4.5
- Исправлен сброс воспроизведения при смене качества с выключенным `PlayerView/savesPlaybackTimeOnStop`.
- Обновлена библиотека GoogleCast до версии 4.8.0.
- Параметр enableMetalLowMemory удалён.
- Добавлена возможность отключения показа preview после завершения видео.
- Добавлен параметр для разрешения переключения рендерера на ходу.
- Системный PiP теперь перезапускает видео после его окончания и нажатия play.

#### OVKit 4.4
- Раскрытие UI элементов для ковров.
- Качество видеорекламы подстраивается под качество видео (`_adsQualityEnabled` в `Environment`).
- Кнопка закрытия полноэкранного плеера всегда видна в режиме показа рекламы.
- Контроллер PiP автоматически уничтожается при остановке плеера.

#### OVKit 4.3
- Минимальная версия iOS 14.0.
- Устранены проблемы (постановка на паузу) при переходе из PiP в fullscreen.
- Добавлена экспериментальная поддержка системного Picture in Picture.
- Базовый Prefetcher сделан публичным.
- Добавлена возможность включать префетч превью.
- В фабрику полноэкранных контролов теперь передается видео. 
- Изменился конвейер рендера.
- Добавлен метод для принудительного layout полноэкранных контролов.

#### OVKit 4.2
- Улучшения при перемотке трансляций.
- Добавлен новый handler статистики `InteractiveStatsHandler`.
- Добавлена возможность включения редизайна стандартных контролов.
- Добавлено динамическое поведение для использования в собственной реализации контролов.
- Добавлен механизм автовоспроизведения следующего видео. 
<br>

-----
#### OVPlayerKit 3.30


#### OVPlayerKit 3.29
- Исправлены фризы картинки при одновременной работе нескольких плееров в iOS 17.

#### OVPlayerKit 3.28
- Статистика: исправление обновления играемого качества в `OVStatisticsHandler/handleStatsQualityChange`. 
- Параметр enableChannelCountAlign удалён.
- В OVRingBuffer добавлен свой объект синхронизации.
- Фикс сброса зума при смене качества.

#### OVPlayerKit 3.27
- Новый ABR для dash live.
- Обновлена библиотека dav1d до версии 1.3.0. Добавлена поддержка av1 на tvOS.
- Удален старый дебаг оверлей.
- Исправлено падение при регистрации `first_frame`.
- Фикс ошибки когда тег uuid находится в самом конце файла.
- Фикс смещения картинки на зуме 1.8x

#### OVPlayerKit 3.26
- Убран принудительный маппинг из OVSurfaceGravityFill -> OVSurfaceGravityScaled.
- Статистика: улучшение подсчета времени first_frame.
- Исправлен сброс громкости при подключении/отключении гарнитуры.
- Исправлено перескакивание картинки при подключении/отключении гарнитуры.
- Дроп слишком старых кадров.
- Подкорректирован расчёт матрици для pinch to zoom.
- Исправлено проигрывание очень длинных видео.

#### OVPlayerKit 3.25
- Исправлено иногда возникающее зависание плеера при перемотке в конец.
- При ошибке воспроизведения плеер сообщает текущее время видео.
- Фикс краша при создании AVAudioPCMBuffer в OVTrackAudioSpeaker_AUv3_v2::pcmBufferChannelCountAlign.

#### OVPlayerKit 3.24
- Изменение user-agent в запросах плеера.
- В случае некорректного декодирования данных аудиоплеер возвращает соответствующие ошибки.
- Исправлено редкое падение в режиме Picture in Picture.
- Зависание cmaf при интенсивной перемотке.
- Фикс падения, когда кол-во аудио каналов расходятся. (VIDEO-23585)
- Исправлено падение при очистке рендерера.

#### OVPlayerKit 3.23
- Ресет audio engine/player при переключение источников на рендер.
- Обновление latency audio units при смене источника на рендер.
- Фикс креша отсутствия таблицы качеств на момент запроса сегмента. 
- Добавлена поддержка `tvOS`.
- Минимальная версия tvOS 15.2
- Применение .gravityFill а не .scaled когда размер кадра нулевой.
- Исправлено падение при переключении рендереров.

#### OVPlayerKit 3.22
- Перемотка в dash cmaf.
- enableBackgroundPlayback удалён.

#### OVPlayerKit 3.21
- Улучшения подсчета quality в статистике.
- Поддержка апи 5.218. Новые поля для live settings.
- Перемотка в hls ondemand.
- Изменилась логика синхронизации аудио/видео дорожек.

#### OVPlayerKit 3.20
- Настройка CADisplayLink перенесена на другой поток.
- Параметр enableMetalLowMemory удалён.
- Выполнение renderSetupQuickBuffer перенесено с main на player queue. 
- Исправление возможного зависания картинки при проигрывании нативных ресурсов.
- Исправление падений при использовании Picture in Picture.

#### OVPlayerKit 3.19
- Cmaf low latency.
- Zoom.
- Изменена логика подготовки данных в OVTrackAudioSpeaker_AUv3_v2.
- Исправлена сборка в Xcode 15 beta.
- Параметр audioSliceCount.
- Фикс краша в OVSegmentTimeline.
- Добавлен публичный интерфейс OVApiServiceMeter, предоставляющий данные о скорости соединения.
- На iOS 14 используется исключительно Metal renderer.
- Фикс для layer position в OVDeckVideoLayer.
<br>

-----

#### OVKResources 2.28
- Удалены неиспользуемые ресурсы.

#### OVKResources 2.27
- Добавлены иконки и ключи локализации для дебаг оверлея.

#### OVKResources 2.26
- Добавлены иконки для AppleTV.

#### OVKResources 2.25
- Добавлен азербайджанский язык.

#### OVKResources 2.24
- Минимальная версия iOS 14.0.

#### OVKResources 2.23
- Добавлены иконки для редизайна контролов.
- Добавлены строки для переключателя автовоспроизведения.
<br>

-----

#### OVKitMyTargetPlugin 2.2


#### OVKitMyTargetPlugin 2.1
- Добавлена поддержка MyTargetSDK версии 5.18.0.

#### OVKitMyTargetPlugin 2.0
- Добавлен в Deploy.
