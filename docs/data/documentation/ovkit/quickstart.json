{"abstract":[{"type":"text","text":"Руководство для первого подключения "},{"type":"codeVoice","code":"OVKit"},{"text":" к проекту. Эти шаги необходимо выполнить перед началом работы.","type":"text"}],"schemaVersion":{"patch":0,"major":0,"minor":3},"sections":[],"seeAlsoSections":[{"title":"Начало работы","identifiers":["doc:\/\/onevideo.OVKit\/documentation\/OVKit\/CreatePlayer","doc:\/\/onevideo.OVKit\/documentation\/OVKit\/Controls","doc:\/\/onevideo.OVKit\/documentation\/OVKit\/Prefetch","doc:\/\/onevideo.OVKit\/documentation\/OVKit\/BackgroundPlayback","doc:\/\/onevideo.OVKit\/documentation\/OVKit\/Fullscreen","doc:\/\/onevideo.OVKit\/documentation\/OVKit\/Plugins","doc:\/\/onevideo.OVKit\/documentation\/OVKit\/gRPC","doc:\/\/onevideo.OVKit\/documentation\/OVKit\/Extras"],"generated":true}],"variants":[{"paths":["\/documentation\/ovkit\/quickstart"],"traits":[{"interfaceLanguage":"swift"}]}],"kind":"article","metadata":{"roleHeading":"Article","modules":[{"name":"OVKit"}],"title":"Быстрый старт","role":"article"},"identifier":{"interfaceLanguage":"swift","url":"doc:\/\/onevideo.OVKit\/documentation\/OVKit\/QuickStart"},"primaryContentSections":[{"content":[{"text":"Настройка сессии","type":"heading","level":2,"anchor":"Настройка-сессии"},{"inlineContent":[{"type":"text","text":"Есть два способа настроить сессию:"}],"type":"paragraph"},{"items":[{"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"Если получен отдельный ключ статистики и есть прямой доступ к получению видео объектов, не нужно настраивать "},{"type":"reference","isActive":true,"identifier":"doc:\/\/onevideo.OVKit\/documentation\/OVKit\/ApiSession"},{"type":"text","text":"."},{"type":"text","text":" "},{"text":"Достаточно просто настраивать ","type":"text"},{"type":"codeVoice","code":"userId"},{"type":"text","text":". После каждого обновления "},{"type":"codeVoice","code":"userId"},{"text":" нужно обновлять окружение статистики.","type":"text"}]}]}],"type":"orderedList"},{"syntax":"swift","type":"codeListing","code":["Environment.shared.userId = <user_id>","Environment.setupStatistics(appKey: <stats_app_key>, tokenProvider: <stats_token_provider>)"]},{"start":2,"items":[{"content":[{"inlineContent":[{"text":"В общем случае нужно один раз на старте настроить сессию ","type":"text"},{"identifier":"doc:\/\/onevideo.OVKit\/documentation\/OVKit\/ApiSession","isActive":true,"type":"reference"},{"type":"text","text":":"}],"type":"paragraph"}]}],"type":"orderedList"},{"code":["ApiSession.setup(clientId: <app_client_id>, secret: <app_secret>)"],"syntax":"swift","type":"codeListing"},{"type":"paragraph","inlineContent":[{"type":"text","text":"Получение "},{"type":"codeVoice","code":"app_client_id"},{"text":" и ","type":"text"},{"type":"codeVoice","code":"app_secret"},{"type":"text","text":":"}]},{"items":[{"content":[{"inlineContent":[{"type":"text","text":"Зарегистрировать ваше приложение в "},{"type":"reference","identifier":"https:\/\/vk.com\/editapp?act=create","isActive":true}],"type":"paragraph"}]},{"content":[{"type":"paragraph","inlineContent":[{"text":"Отправить письмо с запросом на добавление в whitelist al.bolotov@vk.team, указав полученный ","type":"text"},{"type":"codeVoice","code":"app_id"}]}]}],"type":"unorderedList"},{"type":"paragraph","inlineContent":[{"text":"Далее перед проигрыванием видео нужно установить идентификатор пользователя. Это может быть идентификатор пользователя на клиентском портале или уникальный идентификатор устройства. Обязательный параметр.","type":"text"},{"text":" ","type":"text"},{"type":"text","text":"При смене пользователя достаточно только установить новый "},{"type":"codeVoice","code":"userId"},{"text":", дополнительно настраивать ","type":"text"},{"type":"reference","isActive":true,"identifier":"doc:\/\/onevideo.OVKit\/documentation\/OVKit\/ApiSession"},{"type":"text","text":" не нужно."}]},{"type":"codeListing","syntax":"swift","code":["Environment.shared.userId = <user_id>"]},{"type":"heading","text":"Кэш плееров","level":2,"anchor":"Кэш-плееров"},{"type":"paragraph","inlineContent":[{"text":"При необходимости очистить кэш","type":"text"}]},{"syntax":"swift","type":"codeListing","code":["OVPlayer.cache().purgeDisk()"]},{"level":2,"text":"Логи плеера:","type":"heading","anchor":"Логи-плеера"},{"type":"codeListing","syntax":"swift","code":["OVLogger.setLogPrefix(\"[OV]\")","OVLogger.setLogHandler { message in }","OVLogger.setFileLogHandler { message in }","OVLogger.setLogCriticalErrorHandler { error in }","OVLogger.setDiagnosticsReportHandler { report in } \/\/ См. Диагностика"]},{"type":"heading","level":2,"anchor":"Аудиосессия","text":"Аудиосессия"},{"type":"paragraph","inlineContent":[{"type":"text","text":"По умолчанию плеер умеет настраивать "},{"code":"AVAudioSession","type":"codeVoice"},{"type":"text","text":" сам. Если в приложении есть другие сущности, использующие аудио сессию (музыкальный плеер, запись видео, звуки элементов интерфейса), можно интегрировать другой менеджер по работе с аудио соотвествующий протоколу "},{"type":"reference","identifier":"doc:\/\/onevideo.OVKit\/documentation\/OVKit\/AudioManager","isActive":true},{"text":":","type":"text"}]},{"code":["PlayerManager.setup(with:)"],"syntax":"swift","type":"codeListing"},{"type":"heading","level":2,"text":"Делегат менеджера плеера","anchor":"Делегат-менеджера-плеера"},{"type":"paragraph","inlineContent":[{"text":"Для корректной работы плеера, необходимо в одном месте реализовать протокол ","type":"text"},{"type":"reference","isActive":true,"identifier":"doc:\/\/onevideo.OVKit\/documentation\/OVKit\/PlayerManagerDelegate"},{"text":":","type":"text"}]},{"type":"codeListing","syntax":"swift","code":["PlayerManager.shared.delegate = self"]},{"type":"heading","text":"Idle Timer","level":2,"anchor":"Idle-Timer"},{"inlineContent":[{"type":"text","text":"В "},{"type":"reference","identifier":"doc:\/\/onevideo.OVKit\/documentation\/OVKit\/PlayerManager","isActive":true},{"text":" установлен класс, отвечающий за работу с ","type":"text"},{"type":"codeVoice","code":"UIApplication.shared.isIdleTimerDisabled"},{"type":"text","text":". Но можно установить свой, реализующий протокол "},{"isActive":true,"identifier":"doc:\/\/onevideo.OVKit\/documentation\/OVKit\/IdleTimerManager","type":"reference"},{"text":":","type":"text"}],"type":"paragraph"},{"syntax":"swift","code":["PlayerManager.shared.idleTimerManager = <external_idle_timer_manager>"],"type":"codeListing"}],"kind":"content"}],"hierarchy":{"paths":[["doc:\/\/onevideo.OVKit\/documentation\/OVKit"]]},"references":{"doc://onevideo.OVKit/documentation/OVKit/Fullscreen":{"title":"Полноэкранный режим","kind":"article","identifier":"doc:\/\/onevideo.OVKit\/documentation\/OVKit\/Fullscreen","type":"topic","url":"\/documentation\/ovkit\/fullscreen","abstract":[{"type":"text","text":"Кастомизация полноэкранного просмотра."}],"role":"article"},"doc://onevideo.OVKit/documentation/OVKit/BackgroundPlayback":{"url":"\/documentation\/ovkit\/backgroundplayback","type":"topic","title":"Воспроизведение в фоне","abstract":[{"code":"OVKit","type":"codeVoice"},{"text":" поддерживает воспроизведение звука, когда приложение находится в свернутом состоянии.","type":"text"}],"identifier":"doc:\/\/onevideo.OVKit\/documentation\/OVKit\/BackgroundPlayback","role":"article","kind":"article"},"doc://onevideo.OVKit/documentation/OVKit/Video":{"navigatorTitle":[{"text":"Video","kind":"identifier"}],"role":"symbol","identifier":"doc:\/\/onevideo.OVKit\/documentation\/OVKit\/Video","fragments":[{"kind":"keyword","text":"class"},{"kind":"text","text":" "},{"kind":"identifier","text":"Video"}],"abstract":[],"type":"topic","title":"Video","kind":"symbol","url":"\/documentation\/ovkit\/video"},"doc://onevideo.OVKit/documentation/OVKit/CreatePlayer":{"url":"\/documentation\/ovkit\/createplayer","type":"topic","title":"Создание плеера","abstract":[{"text":"Первые шаги после интеграции.","type":"text"}],"identifier":"doc:\/\/onevideo.OVKit\/documentation\/OVKit\/CreatePlayer","role":"article","kind":"article"},"doc://onevideo.OVKit/documentation/OVKit/IdleTimerManager":{"url":"\/documentation\/ovkit\/idletimermanager","navigatorTitle":[{"kind":"identifier","text":"IdleTimerManager"}],"type":"topic","title":"IdleTimerManager","abstract":[{"text":"Служит для запрета автоблокировки устройства во время проигрывания видео.","type":"text"}],"identifier":"doc:\/\/onevideo.OVKit\/documentation\/OVKit\/IdleTimerManager","role":"symbol","kind":"symbol","fragments":[{"kind":"keyword","text":"protocol"},{"kind":"text","text":" "},{"text":"IdleTimerManager","kind":"identifier"}]},"doc://onevideo.OVKit/documentation/OVKit/Prefetch":{"url":"\/documentation\/ovkit\/prefetch","type":"topic","title":"Префетчер","abstract":[{"text":"Предзагрузка видео еще до начала воспроизведения.","type":"text"}],"identifier":"doc:\/\/onevideo.OVKit\/documentation\/OVKit\/Prefetch","role":"article","kind":"article"},"https://vk.com/editapp?act=create":{"type":"link","titleInlineContent":[{"type":"text","text":"VK"}],"url":"https:\/\/vk.com\/editapp?act=create","title":"VK","identifier":"https:\/\/vk.com\/editapp?act=create"},"doc://onevideo.OVKit/documentation/OVKit/Controls":{"url":"\/documentation\/ovkit\/controls","type":"topic","title":"Создание Контролов","abstract":[],"identifier":"doc:\/\/onevideo.OVKit\/documentation\/OVKit\/Controls","role":"article","kind":"article"},"doc://onevideo.OVKit/documentation/OVKit/Extras":{"url":"\/documentation\/ovkit\/extras","type":"topic","title":"Дополнительно","abstract":[{"text":"Дополнительные возможности ","type":"text"},{"type":"codeVoice","code":"OVKit"},{"type":"text","text":"."}],"identifier":"doc:\/\/onevideo.OVKit\/documentation\/OVKit\/Extras","role":"article","kind":"article"},"doc://onevideo.OVKit/documentation/OVKit/ApiSession":{"url":"\/documentation\/ovkit\/apisession","navigatorTitle":[{"kind":"identifier","text":"ApiSession"}],"type":"topic","title":"ApiSession","abstract":[{"type":"text","text":"Класс для работы с апи сессией ВКонтакте. Позволяет получать объекты "},{"type":"reference","identifier":"doc:\/\/onevideo.OVKit\/documentation\/OVKit\/Video","isActive":true},{"text":" по их ","type":"text"},{"code":"id","type":"codeVoice"},{"text":".","type":"text"}],"identifier":"doc:\/\/onevideo.OVKit\/documentation\/OVKit\/ApiSession","role":"symbol","kind":"symbol","fragments":[{"kind":"keyword","text":"class"},{"text":" ","kind":"text"},{"text":"ApiSession","kind":"identifier"}]},"doc://onevideo.OVKit/documentation/OVKit":{"role":"collection","identifier":"doc:\/\/onevideo.OVKit\/documentation\/OVKit","title":"OVKit","type":"topic","url":"\/documentation\/ovkit","abstract":[{"text":"Плеер видео и трансляций для VK Видео.","type":"text"}],"kind":"symbol"},"doc://onevideo.OVKit/documentation/OVKit/Plugins":{"url":"\/documentation\/ovkit\/plugins","type":"topic","title":"Плагины","abstract":[{"text":"Плагины позволяют расширить функциональность ","type":"text"},{"type":"codeVoice","code":"OVKit"},{"type":"text","text":"."}],"identifier":"doc:\/\/onevideo.OVKit\/documentation\/OVKit\/Plugins","role":"collectionGroup","kind":"article"},"doc://onevideo.OVKit/documentation/OVKit/AudioManager":{"url":"\/documentation\/ovkit\/audiomanager","navigatorTitle":[{"kind":"identifier","text":"AudioManager"}],"type":"topic","title":"AudioManager","abstract":[{"type":"text","text":"Протокол, позволяющий настраивать поведение "},{"type":"codeVoice","code":"AVAudioSession"},{"text":" при работе плееров.","type":"text"}],"identifier":"doc:\/\/onevideo.OVKit\/documentation\/OVKit\/AudioManager","role":"symbol","kind":"symbol","fragments":[{"kind":"keyword","text":"protocol"},{"text":" ","kind":"text"},{"text":"AudioManager","kind":"identifier"}]},"doc://onevideo.OVKit/documentation/OVKit/PlayerManagerDelegate":{"url":"\/documentation\/ovkit\/playermanagerdelegate","navigatorTitle":[{"text":"PlayerManagerDelegate","kind":"identifier"}],"type":"topic","title":"PlayerManagerDelegate","abstract":[],"identifier":"doc:\/\/onevideo.OVKit\/documentation\/OVKit\/PlayerManagerDelegate","role":"symbol","kind":"symbol","fragments":[{"text":"protocol","kind":"keyword"},{"text":" ","kind":"text"},{"kind":"identifier","text":"PlayerManagerDelegate"}]},"doc://onevideo.OVKit/documentation/OVKit/gRPC":{"url":"\/documentation\/ovkit\/grpc","type":"topic","title":"gRPC","abstract":[],"identifier":"doc:\/\/onevideo.OVKit\/documentation\/OVKit\/gRPC","role":"article","kind":"article"},"doc://onevideo.OVKit/documentation/OVKit/PlayerManager":{"fragments":[{"text":"class","kind":"keyword"},{"text":" ","kind":"text"},{"text":"PlayerManager","kind":"identifier"}],"abstract":[{"text":"Сервис, отвечающий за управление порядком воспроизведения всех плееров в приложении.","type":"text"}],"identifier":"doc:\/\/onevideo.OVKit\/documentation\/OVKit\/PlayerManager","role":"symbol","url":"\/documentation\/ovkit\/playermanager","kind":"symbol","navigatorTitle":[{"kind":"identifier","text":"PlayerManager"}],"title":"PlayerManager","type":"topic"}}}