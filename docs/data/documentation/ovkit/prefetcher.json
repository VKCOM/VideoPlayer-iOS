{"variants":[{"traits":[{"interfaceLanguage":"swift"}],"paths":["\/documentation\/ovkit\/prefetcher"]},{"traits":[{"interfaceLanguage":"occ"}],"paths":["\/documentation\/ovkit\/prefetcher"]}],"kind":"symbol","hierarchy":{"paths":[["doc:\/\/onevideo.OVKit\/documentation\/OVKit"]]},"schemaVersion":{"minor":3,"patch":0,"major":0},"primaryContentSections":[{"kind":"declarations","declarations":[{"platforms":["iOS"],"tokens":[{"kind":"keyword","text":"class"},{"kind":"text","text":" "},{"kind":"identifier","text":"Prefetcher"}],"languages":["swift"]}]},{"content":[{"type":"heading","level":2,"text":"Overview","anchor":"overview"},{"inlineContent":[{"text":"Видео можно предзагружать еще до создания плеера. Предзагрузка может происходить одновременно с проигрыванием других видео, но при этом она имеет более низкий приоритет. При очень низкой скорости сети предзагрузка автоматически приостанавливается, если параллельно играет хотя бы один плеер. Потом так же автоматически возобновляется, если плеер перестал использовать сеть для загрузки или состояние сети улучшилось.","type":"text"}],"type":"paragraph"},{"name":"Tip","type":"aside","content":[{"type":"paragraph","inlineContent":[{"text":"Видео можно начинать проигрывать плеером, даже если предзагрузка еще не завершилась. В этом случае плеер сначала дождется завершения предзагрузки воспроизводимого в нем видео, а потом начнет воспроизведение сразу из кэша.","type":"text"}]}],"style":"tip"},{"inlineContent":[{"text":"Добавление в очередь производится методом ","type":"text"},{"identifier":"doc:\/\/onevideo.OVKit\/documentation\/OVKit\/Prefetcher\/prefetchVideo(_:duration:after:forcePrefetchPreview:estimatedSurfaceSize:onFinish:)","type":"reference","isActive":true},{"text":". Предзагрузка начинается автоматически после добавления в очередь.","type":"text"}],"type":"paragraph"},{"type":"codeListing","syntax":"swift","code":["\/\/ К примеру, модели видео из ленты","let prefetchItems: [VideoType] = ...","for item in prefetchItems {","    \/\/ Добавление в очередь","    prefetcher.prefetchVideo(item)","}"]},{"inlineContent":[{"type":"text","text":"Для более сложных сценариев, где есть список из моделей и он время от времени меняется, лучше подойдет "},{"identifier":"doc:\/\/onevideo.OVKit\/documentation\/OVKit\/IndexPrefetcher","type":"reference","isActive":true},{"type":"text","text":"."}],"type":"paragraph"},{"inlineContent":[{"text":"Удаление из очереди или отмена уже выполняющейся операции производится методом ","type":"text"},{"identifier":"doc:\/\/onevideo.OVKit\/documentation\/OVKit\/Prefetcher\/cancelVideo(_:)","type":"reference","isActive":true},{"text":". Аргументом должно быть то же самое видео, которое было использовано для добавления в очередь.","type":"text"}],"type":"paragraph"},{"type":"codeListing","syntax":"swift","code":["prefetcher.cancelVideo(someItemToCancel)"]},{"name":"Warning","type":"aside","content":[{"type":"paragraph","inlineContent":[{"text":"Все методы должны вызываться с главного потока.","type":"text"}]}],"style":"warning"}],"kind":"content"}],"metadata":{"externalID":"c:@M@OVKit@objc(cs)Prefetcher","title":"Prefetcher","navigatorTitle":[{"kind":"identifier","text":"Prefetcher"}],"symbolKind":"class","modules":[{"name":"OVKit"}],"roleHeading":"Class","fragments":[{"kind":"keyword","text":"class"},{"kind":"text","text":" "},{"kind":"identifier","text":"Prefetcher"}],"role":"symbol"},"topicSections":[{"anchor":"Structures","identifiers":["doc:\/\/onevideo.OVKit\/documentation\/OVKit\/Prefetcher\/TaskSummary"],"generated":true,"title":"Structures"},{"anchor":"Initializers","identifiers":["doc:\/\/onevideo.OVKit\/documentation\/OVKit\/Prefetcher\/init(groupName:cacheContainer:controlQueue:)"],"generated":true,"title":"Initializers"},{"anchor":"Instance-Properties","identifiers":["doc:\/\/onevideo.OVKit\/documentation\/OVKit\/Prefetcher\/maxConcurrentDownloadsCount"],"generated":true,"title":"Instance Properties"},{"anchor":"Instance-Methods","identifiers":["doc:\/\/onevideo.OVKit\/documentation\/OVKit\/Prefetcher\/cancelAll()","doc:\/\/onevideo.OVKit\/documentation\/OVKit\/Prefetcher\/cancelVideo(_:)","doc:\/\/onevideo.OVKit\/documentation\/OVKit\/Prefetcher\/prefetchVideo(_:duration:after:forcePrefetchPreview:estimatedSurfaceSize:onFinish:)"],"generated":true,"title":"Instance Methods"}],"relationshipsSections":[{"kind":"relationships","identifiers":["doc:\/\/onevideo.OVKit\/objc(cs)NSObject"],"type":"inheritsFrom","title":"Inherits From"},{"kind":"relationships","identifiers":["doc:\/\/onevideo.OVKit\/objc(pl)NSObject","doc:\/\/onevideo.OVKit\/s7CVarArgP","doc:\/\/onevideo.OVKit\/s28CustomDebugStringConvertibleP","doc:\/\/onevideo.OVKit\/s23CustomStringConvertibleP","doc:\/\/onevideo.OVKit\/SQ","doc:\/\/onevideo.OVKit\/SH"],"type":"conformsTo","title":"Conforms To"}],"identifier":{"url":"doc:\/\/onevideo.OVKit\/documentation\/OVKit\/Prefetcher","interfaceLanguage":"swift"},"abstract":[{"type":"text","text":"Префетчер видеозаписей."}],"sections":[],"references":{"doc://onevideo.OVKit/documentation/OVKit/IndexPrefetcher":{"abstract":[{"text":"Префетчер списка видеозаписей.","type":"text"}],"kind":"symbol","identifier":"doc:\/\/onevideo.OVKit\/documentation\/OVKit\/IndexPrefetcher","fragments":[{"text":"class","kind":"keyword"},{"text":" ","kind":"text"},{"text":"IndexPrefetcher","kind":"identifier"}],"navigatorTitle":[{"text":"IndexPrefetcher","kind":"identifier"}],"title":"IndexPrefetcher","role":"symbol","url":"\/documentation\/ovkit\/indexprefetcher","type":"topic"},"doc://onevideo.OVKit/objc(pl)NSObject":{"type":"unresolvable","title":"ObjectiveC.NSObjectProtocol","identifier":"doc:\/\/onevideo.OVKit\/objc(pl)NSObject"},"doc://onevideo.OVKit/s7CVarArgP":{"type":"unresolvable","identifier":"doc:\/\/onevideo.OVKit\/s7CVarArgP","title":"Swift.CVarArg"},"doc://onevideo.OVKit/documentation/OVKit/Prefetcher":{"fragments":[{"kind":"keyword","text":"class"},{"kind":"text","text":" "},{"kind":"identifier","text":"Prefetcher"}],"url":"\/documentation\/ovkit\/prefetcher","title":"Prefetcher","navigatorTitle":[{"kind":"identifier","text":"Prefetcher"}],"kind":"symbol","identifier":"doc:\/\/onevideo.OVKit\/documentation\/OVKit\/Prefetcher","role":"symbol","type":"topic","abstract":[{"type":"text","text":"Префетчер видеозаписей."}]},"doc://onevideo.OVKit/s28CustomDebugStringConvertibleP":{"type":"unresolvable","title":"Swift.CustomDebugStringConvertible","identifier":"doc:\/\/onevideo.OVKit\/s28CustomDebugStringConvertibleP"},"doc://onevideo.OVKit/documentation/OVKit/Prefetcher/TaskSummary":{"role":"symbol","identifier":"doc:\/\/onevideo.OVKit\/documentation\/OVKit\/Prefetcher\/TaskSummary","type":"topic","kind":"symbol","url":"\/documentation\/ovkit\/prefetcher\/tasksummary","abstract":[{"text":"Информация об успешном результате выполнения префетча одного ресурса.","type":"text"}],"fragments":[{"kind":"keyword","text":"struct"},{"kind":"text","text":" "},{"kind":"identifier","text":"TaskSummary"}],"title":"Prefetcher.TaskSummary","navigatorTitle":[{"kind":"identifier","text":"TaskSummary"}]},"doc://onevideo.OVKit/documentation/OVKit/Prefetcher/maxConcurrentDownloadsCount":{"role":"symbol","fragments":[{"kind":"keyword","text":"var"},{"kind":"text","text":" "},{"kind":"identifier","text":"maxConcurrentDownloadsCount"},{"kind":"text","text":": "},{"kind":"typeIdentifier","preciseIdentifier":"s:Si","text":"Int"}],"abstract":[{"type":"text","text":"Максимальное количество параллельно предзагружаемых видео."}],"kind":"symbol","type":"topic","identifier":"doc:\/\/onevideo.OVKit\/documentation\/OVKit\/Prefetcher\/maxConcurrentDownloadsCount","title":"maxConcurrentDownloadsCount","url":"\/documentation\/ovkit\/prefetcher\/maxconcurrentdownloadscount"},"doc://onevideo.OVKit/documentation/OVKit/Prefetcher/cancelVideo(_:)":{"role":"symbol","type":"topic","abstract":[{"type":"text","text":"Отмена предзагрузки конкретного видео, если она выполняется в данный момент."}],"kind":"symbol","identifier":"doc:\/\/onevideo.OVKit\/documentation\/OVKit\/Prefetcher\/cancelVideo(_:)","url":"\/documentation\/ovkit\/prefetcher\/cancelvideo(_:)","fragments":[{"kind":"keyword","text":"func"},{"kind":"text","text":" "},{"kind":"identifier","text":"cancelVideo"},{"kind":"text","text":"("},{"kind":"typeIdentifier","preciseIdentifier":"c:@M@OVKit@objc(pl)OVKVideoType","text":"VideoType"},{"kind":"text","text":")"}],"title":"cancelVideo(_:)"},"doc://onevideo.OVKit/documentation/OVKit/Prefetcher/init(groupName:cacheContainer:controlQueue:)":{"kind":"symbol","fragments":[{"text":"init","kind":"identifier"},{"text":"(","kind":"text"},{"text":"groupName","kind":"externalParam"},{"text":": ","kind":"text"},{"text":"String","kind":"typeIdentifier","preciseIdentifier":"s:SS"},{"text":"?, ","kind":"text"},{"text":"cacheContainer","kind":"externalParam"},{"text":": ","kind":"text"},{"text":"CacheContainer","kind":"typeIdentifier","preciseIdentifier":"c:@M@OVKit@objc(cs)OVKCacheContainer"},{"text":"?, ","kind":"text"},{"text":"controlQueue","kind":"externalParam"},{"kind":"text","text":": "},{"kind":"typeIdentifier","text":"DispatchQueue","preciseIdentifier":"c:objc(cs)OS_dispatch_queue"},{"kind":"text","text":")"}],"role":"symbol","type":"topic","title":"init(groupName:cacheContainer:controlQueue:)","identifier":"doc:\/\/onevideo.OVKit\/documentation\/OVKit\/Prefetcher\/init(groupName:cacheContainer:controlQueue:)","url":"\/documentation\/ovkit\/prefetcher\/init(groupname:cachecontainer:controlqueue:)","abstract":[{"text":"Создание префетчера.","type":"text"}]},"doc://onevideo.OVKit/s23CustomStringConvertibleP":{"type":"unresolvable","title":"Swift.CustomStringConvertible","identifier":"doc:\/\/onevideo.OVKit\/s23CustomStringConvertibleP"},"doc://onevideo.OVKit/objc(cs)NSObject":{"type":"unresolvable","identifier":"doc:\/\/onevideo.OVKit\/objc(cs)NSObject","title":"NSObject"},"doc://onevideo.OVKit/documentation/OVKit":{"identifier":"doc:\/\/onevideo.OVKit\/documentation\/OVKit","type":"topic","abstract":[{"text":"Плеер видео и трансляций для VK Видео.","type":"text"}],"title":"OVKit","url":"\/documentation\/ovkit","kind":"symbol","role":"collection"},"doc://onevideo.OVKit/SQ":{"type":"unresolvable","title":"Swift.Equatable","identifier":"doc:\/\/onevideo.OVKit\/SQ"},"doc://onevideo.OVKit/documentation/OVKit/Prefetcher/prefetchVideo(_:duration:after:forcePrefetchPreview:estimatedSurfaceSize:onFinish:)":{"fragments":[{"kind":"keyword","text":"func"},{"kind":"text","text":" "},{"kind":"identifier","text":"prefetchVideo"},{"kind":"text","text":"("},{"kind":"typeIdentifier","text":"VideoType","preciseIdentifier":"c:@M@OVKit@objc(pl)OVKVideoType"},{"kind":"text","text":", "},{"kind":"externalParam","text":"duration"},{"kind":"text","text":": "},{"kind":"typeIdentifier","preciseIdentifier":"c:@T@NSTimeInterval","text":"TimeInterval"},{"kind":"text","text":", "},{"kind":"externalParam","text":"after"},{"kind":"text","text":": "},{"kind":"typeIdentifier","preciseIdentifier":"c:@T@NSTimeInterval","text":"TimeInterval"},{"kind":"text","text":"?, "},{"kind":"externalParam","text":"forcePrefetchPreview"},{"kind":"text","text":": "},{"kind":"typeIdentifier","preciseIdentifier":"s:Sb","text":"Bool"},{"kind":"text","text":", "},{"kind":"externalParam","text":"estimatedSurfaceSize"},{"kind":"text","text":": "},{"kind":"typeIdentifier","preciseIdentifier":"c:@S@CGSize","text":"CGSize"},{"kind":"text","text":"?, "},{"kind":"externalParam","text":"onFinish"},{"kind":"text","text":": (("},{"kind":"typeIdentifier","preciseIdentifier":"s:5OVKit10PrefetcherC11TaskSummaryV","text":"TaskSummary"},{"kind":"text","text":"?, "},{"kind":"typeIdentifier","preciseIdentifier":"s:s5ErrorP","text":"Error"},{"kind":"text","text":"?) -> "},{"kind":"typeIdentifier","preciseIdentifier":"s:s4Voida","text":"Void"},{"kind":"text","text":")?)"}],"url":"\/documentation\/ovkit\/prefetcher\/prefetchvideo(_:duration:after:forceprefetchpreview:estimatedsurfacesize:onfinish:)","type":"topic","role":"symbol","kind":"symbol","abstract":[{"type":"text","text":"Начать предзагрузку видео."}],"title":"prefetchVideo(_:duration:after:forcePrefetchPreview:estimatedSurfaceSize:onFinish:)","identifier":"doc:\/\/onevideo.OVKit\/documentation\/OVKit\/Prefetcher\/prefetchVideo(_:duration:after:forcePrefetchPreview:estimatedSurfaceSize:onFinish:)"},"doc://onevideo.OVKit/SH":{"type":"unresolvable","identifier":"doc:\/\/onevideo.OVKit\/SH","title":"Swift.Hashable"},"doc://onevideo.OVKit/documentation/OVKit/Prefetcher/cancelAll()":{"role":"symbol","type":"topic","url":"\/documentation\/ovkit\/prefetcher\/cancelall()","fragments":[{"text":"func","kind":"keyword"},{"text":" ","kind":"text"},{"text":"cancelAll","kind":"identifier"},{"text":"()","kind":"text"}],"identifier":"doc:\/\/onevideo.OVKit\/documentation\/OVKit\/Prefetcher\/cancelAll()","kind":"symbol","title":"cancelAll()","abstract":[{"type":"text","text":"Отмена предзагрузки всех ресурсов."}]}},"variantOverrides":[{"patch":[{"op":"replace","path":"\/identifier\/interfaceLanguage","value":"occ"},{"op":"add","path":"\/metadata\/platforms","value":null},{"op":"replace","path":"\/metadata\/roleHeading","value":"Class"},{"op":"replace","path":"\/metadata\/title","value":"Prefetcher"},{"op":"replace","path":"\/metadata\/symbolKind","value":"class"},{"op":"replace","path":"\/metadata\/fragments","value":[{"text":"Prefetcher","kind":"identifier"}]},{"op":"replace","path":"\/metadata\/navigatorTitle","value":[{"kind":"identifier","text":"Prefetcher"}]},{"op":"replace","path":"\/topicSections","value":null},{"op":"replace","path":"\/relationshipsSections","value":[{"kind":"relationships","identifiers":["doc:\/\/onevideo.OVKit\/objc(cs)NSObject"],"title":"Inherits From","type":"inheritsFrom"}]},{"op":"add","path":"\/seeAlsoSections","value":null},{"op":"replace","path":"\/primaryContentSections\/0","value":{"declarations":[{"tokens":[{"text":"@interface","kind":"keyword"},{"text":" ","kind":"text"},{"text":"Prefetcher","kind":"identifier"},{"text":" : ","kind":"text"},{"text":"NSObject","preciseIdentifier":"c:objc(cs)NSObject","kind":"typeIdentifier"}],"platforms":["iOS"],"languages":["occ"]}],"kind":"declarations"}},{"op":"replace","path":"\/references\/doc:~1~1onevideo.OVKit~1documentation~1OVKit~1IndexPrefetcher\/title","value":"OVKIndexPrefetcher"},{"op":"replace","path":"\/references\/doc:~1~1onevideo.OVKit~1documentation~1OVKit~1IndexPrefetcher\/fragments","value":[{"text":"OVKIndexPrefetcher","kind":"identifier"}]},{"op":"replace","path":"\/references\/doc:~1~1onevideo.OVKit~1documentation~1OVKit~1IndexPrefetcher\/navigatorTitle","value":[{"kind":"identifier","text":"OVKIndexPrefetcher"}]},{"op":"replace","path":"\/references\/doc:~1~1onevideo.OVKit~1documentation~1OVKit~1Prefetcher\/title","value":"Prefetcher"},{"op":"replace","path":"\/references\/doc:~1~1onevideo.OVKit~1documentation~1OVKit~1Prefetcher\/fragments","value":[{"text":"Prefetcher","kind":"identifier"}]},{"op":"replace","path":"\/references\/doc:~1~1onevideo.OVKit~1documentation~1OVKit~1Prefetcher\/navigatorTitle","value":[{"kind":"identifier","text":"Prefetcher"}]}],"traits":[{"interfaceLanguage":"occ"}]}]}