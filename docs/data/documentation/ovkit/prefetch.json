{"kind":"article","metadata":{"role":"article","title":"Префетчер","modules":[{"name":"OVKit"}],"roleHeading":"Article"},"schemaVersion":{"major":0,"patch":0,"minor":3},"variants":[{"traits":[{"interfaceLanguage":"swift"}],"paths":["\/documentation\/ovkit\/prefetch"]},{"traits":[{"interfaceLanguage":"occ"}],"paths":["\/documentation\/ovkit\/prefetch"]}],"identifier":{"url":"doc:\/\/onevideo.OVKit\/documentation\/OVKit\/Prefetch","interfaceLanguage":"swift"},"sections":[],"abstract":[{"type":"text","text":"Предзагрузка видео еще до начала воспроизведения."}],"seeAlsoSections":[{"anchor":"Начало-работы","identifiers":["doc:\/\/onevideo.OVKit\/documentation\/OVKit\/QuickStart","doc:\/\/onevideo.OVKit\/documentation\/OVKit\/CreatePlayer","doc:\/\/onevideo.OVKit\/documentation\/OVKit\/Controls","doc:\/\/onevideo.OVKit\/documentation\/OVKit\/BackgroundPlayback","doc:\/\/onevideo.OVKit\/documentation\/OVKit\/Fullscreen","doc:\/\/onevideo.OVKit\/documentation\/OVKit\/Plugins","doc:\/\/onevideo.OVKit\/documentation\/OVKit\/Statistics","doc:\/\/onevideo.OVKit\/documentation\/OVKit\/gRPC","doc:\/\/onevideo.OVKit\/documentation\/OVKit\/Extras"],"title":"Начало работы","generated":true}],"primaryContentSections":[{"kind":"content","content":[{"level":2,"type":"heading","text":"Overview","anchor":"Overview"},{"inlineContent":[{"type":"text","text":"Видео можно предзагружать еще до создания плеера. Для этого используется "},{"identifier":"doc:\/\/onevideo.OVKit\/documentation\/OVKit\/IndexPrefetcher","type":"reference","isActive":true},{"text":", который поддерживает только DASH ресурсы.","type":"text"}],"type":"paragraph"},{"type":"paragraph","inlineContent":[{"text":"Внутри ","type":"text"},{"type":"reference","identifier":"doc:\/\/onevideo.OVKit\/documentation\/OVKit\/IndexPrefetcher","isActive":true},{"type":"text","text":" находится очередь, в которую помещаются объекты протокола "},{"isActive":true,"type":"reference","identifier":"doc:\/\/onevideo.OVKit\/documentation\/OVKit\/PrefetchItem"},{"text":". Данный протокол описывает видео и параметры его предзагрузки.","type":"text"}]},{"type":"paragraph","inlineContent":[{"type":"text","text":"Предзагрузка может происходить одновременно с проигрыванием других видео, но при этом она имеет более низкий приоритет. При очень низкой скорости сети предзагрузка автоматически приостанавливается, если параллельно играет хотя бы один плеер. Потом так же автоматически возобновляется, если плеер перестал использовать сеть для загрузки или состояние сети улучшилось."}]},{"style":"tip","name":"Tip","content":[{"inlineContent":[{"type":"text","text":"Видео можно начинать проигрывать плеером, даже если предзагрузка еще не завершилась."}],"type":"paragraph"}],"type":"aside"},{"inlineContent":[{"text":"Добавление в очередь производится методом ","type":"text"},{"isActive":true,"type":"reference","identifier":"doc:\/\/onevideo.OVKit\/documentation\/OVKit\/IndexPrefetcher\/prefetch(_:)"},{"text":". Предзагрузка начинается автоматически после добавления в очередь.","type":"text"}],"type":"paragraph"},{"type":"codeListing","syntax":"swift","code":["\/\/ К примеру, модели видео из ленты","let prefetchItems: [PrefetchItem] = ...     ","for item in prefetchItems {","    \/\/ Добавление в очередь","    prefetcher.prefetchItem(item)","}"]},{"inlineContent":[{"type":"text","text":"Удаление из очереди или отмена уже выполняющейся операции производится методом "},{"type":"reference","identifier":"doc:\/\/onevideo.OVKit\/documentation\/OVKit\/IndexPrefetcher\/cancel(_:)","isActive":true},{"type":"text","text":". Аргументом должен быть тот же самый "},{"isActive":true,"identifier":"doc:\/\/onevideo.OVKit\/documentation\/OVKit\/PrefetchItem","type":"reference"},{"text":", который был использован для добавления в очередь.","type":"text"}],"type":"paragraph"},{"type":"codeListing","code":["prefetcher.cancel(someItemToCancel)"],"syntax":"swift"}]}],"hierarchy":{"paths":[["doc:\/\/onevideo.OVKit\/documentation\/OVKit"]]},"references":{"doc://onevideo.OVKit/documentation/OVKit":{"type":"topic","url":"\/documentation\/ovkit","title":"OVKit","abstract":[{"text":"Плеер видео и трансляций для VK Видео.","type":"text"}],"kind":"symbol","role":"collection","identifier":"doc:\/\/onevideo.OVKit\/documentation\/OVKit"},"doc://onevideo.OVKit/documentation/OVKit/PrefetchItem":{"role":"symbol","abstract":[{"text":"Протокол, описывающий параметры предзагрузки видео-ресурса.","type":"text"}],"identifier":"doc:\/\/onevideo.OVKit\/documentation\/OVKit\/PrefetchItem","type":"topic","url":"\/documentation\/ovkit\/prefetchitem","fragments":[{"kind":"keyword","text":"protocol"},{"text":" ","kind":"text"},{"text":"PrefetchItem","kind":"identifier"}],"kind":"symbol","title":"PrefetchItem","navigatorTitle":[{"text":"PrefetchItem","kind":"identifier"}]},"doc://onevideo.OVKit/documentation/OVKit/Statistics":{"title":"Статистика","identifier":"doc:\/\/onevideo.OVKit\/documentation\/OVKit\/Statistics","abstract":[{"text":"SDK поддерживает сбор статистики по воспроизведению видео.","type":"text"}],"role":"article","kind":"article","type":"topic","url":"\/documentation\/ovkit\/statistics"},"doc://onevideo.OVKit/documentation/OVKit/Fullscreen":{"role":"article","title":"Полноэкранный режим","kind":"article","abstract":[{"text":"Кастомизация полноэкранного просмотра.","type":"text"}],"identifier":"doc:\/\/onevideo.OVKit\/documentation\/OVKit\/Fullscreen","type":"topic","url":"\/documentation\/ovkit\/fullscreen"},"doc://onevideo.OVKit/documentation/OVKit/Controls":{"identifier":"doc:\/\/onevideo.OVKit\/documentation\/OVKit\/Controls","type":"topic","kind":"article","abstract":[],"role":"article","title":"Создание Контролов","url":"\/documentation\/ovkit\/controls"},"doc://onevideo.OVKit/documentation/OVKit/CreatePlayer":{"identifier":"doc:\/\/onevideo.OVKit\/documentation\/OVKit\/CreatePlayer","url":"\/documentation\/ovkit\/createplayer","role":"article","kind":"article","title":"Создание плеера","abstract":[{"text":"Первые шаги после интеграции.","type":"text"}],"type":"topic"},"doc://onevideo.OVKit/documentation/OVKit/Plugins":{"kind":"article","url":"\/documentation\/ovkit\/plugins","abstract":[{"text":"Плагины позволяют расширить функциональность ","type":"text"},{"code":"OVKit","type":"codeVoice"},{"text":".","type":"text"}],"title":"Плагины","type":"topic","identifier":"doc:\/\/onevideo.OVKit\/documentation\/OVKit\/Plugins","role":"collectionGroup"},"doc://onevideo.OVKit/documentation/OVKit/BackgroundPlayback":{"identifier":"doc:\/\/onevideo.OVKit\/documentation\/OVKit\/BackgroundPlayback","type":"topic","kind":"article","abstract":[{"code":"OVKit","type":"codeVoice"},{"text":" поддерживает воспроизведение звука или видео, когда приложение находится в свернутом состоянии.","type":"text"}],"role":"article","title":"Воспроизведение в фоне","url":"\/documentation\/ovkit\/backgroundplayback"},"doc://onevideo.OVKit/documentation/OVKit/IndexPrefetcher":{"title":"IndexPrefetcher","fragments":[{"text":"class","kind":"keyword"},{"kind":"text","text":" "},{"text":"IndexPrefetcher","kind":"identifier"}],"url":"\/documentation\/ovkit\/indexprefetcher","role":"symbol","identifier":"doc:\/\/onevideo.OVKit\/documentation\/OVKit\/IndexPrefetcher","abstract":[{"type":"text","text":"Префетчер списка видеозаписей."}],"type":"topic","kind":"symbol","navigatorTitle":[{"kind":"identifier","text":"IndexPrefetcher"}]},"doc://onevideo.OVKit/documentation/OVKit/gRPC":{"abstract":[],"role":"article","title":"gRPC","kind":"article","url":"\/documentation\/ovkit\/grpc","type":"topic","identifier":"doc:\/\/onevideo.OVKit\/documentation\/OVKit\/gRPC"},"doc://onevideo.OVKit/documentation/OVKit/QuickStart":{"title":"Быстрый старт","identifier":"doc:\/\/onevideo.OVKit\/documentation\/OVKit\/QuickStart","abstract":[{"text":"Руководство для первого подключения ","type":"text"},{"code":"OVKit","type":"codeVoice"},{"text":" к проекту. Эти шаги необходимо выполнить перед началом работы.","type":"text"}],"role":"article","kind":"article","type":"topic","url":"\/documentation\/ovkit\/quickstart"},"doc://onevideo.OVKit/documentation/OVKit/Extras":{"title":"Дополнительно","identifier":"doc:\/\/onevideo.OVKit\/documentation\/OVKit\/Extras","abstract":[{"type":"text","text":"Дополнительные возможности "},{"type":"codeVoice","code":"OVKit"},{"text":".","type":"text"}],"role":"article","kind":"article","type":"topic","url":"\/documentation\/ovkit\/extras"},"doc://onevideo.OVKit/documentation/OVKit/IndexPrefetcher/prefetch(_:)":{"fragments":[{"text":"func","kind":"keyword"},{"text":" ","kind":"text"},{"text":"prefetch","kind":"identifier"},{"kind":"text","text":"("},{"preciseIdentifier":"c:@M@OVKit@objc(pl)OVKPrefetchItem","kind":"typeIdentifier","text":"PrefetchItem"},{"text":")","kind":"text"}],"navigatorTitle":[{"kind":"identifier","text":"prefetch:"}],"role":"symbol","title":"prefetch(_:)","kind":"symbol","url":"\/documentation\/ovkit\/indexprefetcher\/prefetch(_:)","type":"topic","abstract":[{"type":"text","text":"Предзагрузка произвольного элемента отдельно от списка."}],"identifier":"doc:\/\/onevideo.OVKit\/documentation\/OVKit\/IndexPrefetcher\/prefetch(_:)"},"doc://onevideo.OVKit/documentation/OVKit/IndexPrefetcher/cancel(_:)":{"fragments":[{"kind":"keyword","text":"func"},{"text":" ","kind":"text"},{"kind":"identifier","text":"cancel"},{"text":"(","kind":"text"},{"preciseIdentifier":"c:@M@OVKit@objc(pl)OVKPrefetchItem","kind":"typeIdentifier","text":"PrefetchItem"},{"kind":"text","text":")"}],"abstract":[{"text":"Отмена предзагрузки произвольного элемента.","type":"text"}],"navigatorTitle":[{"text":"cancel:","kind":"identifier"}],"role":"symbol","title":"cancel(_:)","identifier":"doc:\/\/onevideo.OVKit\/documentation\/OVKit\/IndexPrefetcher\/cancel(_:)","url":"\/documentation\/ovkit\/indexprefetcher\/cancel(_:)","kind":"symbol","type":"topic"}},"variantOverrides":[{"traits":[{"interfaceLanguage":"occ"}],"patch":[{"value":"occ","op":"replace","path":"\/identifier\/interfaceLanguage"},{"value":null,"path":"\/topicSections","op":"add"},{"value":[{"title":"Начало работы","generated":true,"identifiers":["doc:\/\/onevideo.OVKit\/documentation\/OVKit\/QuickStart","doc:\/\/onevideo.OVKit\/documentation\/OVKit\/CreatePlayer","doc:\/\/onevideo.OVKit\/documentation\/OVKit\/Controls","doc:\/\/onevideo.OVKit\/documentation\/OVKit\/BackgroundPlayback","doc:\/\/onevideo.OVKit\/documentation\/OVKit\/Fullscreen","doc:\/\/onevideo.OVKit\/documentation\/OVKit\/Plugins","doc:\/\/onevideo.OVKit\/documentation\/OVKit\/Statistics","doc:\/\/onevideo.OVKit\/documentation\/OVKit\/gRPC","doc:\/\/onevideo.OVKit\/documentation\/OVKit\/Extras"],"anchor":"Начало-работы"}],"path":"\/seeAlsoSections","op":"replace"},{"op":"replace","path":"\/references\/doc:~1~1onevideo.OVKit~1documentation~1OVKit~1PrefetchItem\/title","value":"OVKPrefetchItem"},{"op":"replace","value":[{"kind":"identifier","text":"OVKPrefetchItem"}],"path":"\/references\/doc:~1~1onevideo.OVKit~1documentation~1OVKit~1PrefetchItem\/fragments"},{"op":"replace","path":"\/references\/doc:~1~1onevideo.OVKit~1documentation~1OVKit~1PrefetchItem\/navigatorTitle","value":[{"kind":"identifier","text":"OVKPrefetchItem"}]},{"value":"OVKIndexPrefetcher","op":"replace","path":"\/references\/doc:~1~1onevideo.OVKit~1documentation~1OVKit~1IndexPrefetcher\/title"},{"path":"\/references\/doc:~1~1onevideo.OVKit~1documentation~1OVKit~1IndexPrefetcher\/fragments","op":"replace","value":[{"text":"OVKIndexPrefetcher","kind":"identifier"}]},{"op":"replace","path":"\/references\/doc:~1~1onevideo.OVKit~1documentation~1OVKit~1IndexPrefetcher\/navigatorTitle","value":[{"text":"OVKIndexPrefetcher","kind":"identifier"}]},{"path":"\/references\/doc:~1~1onevideo.OVKit~1documentation~1OVKit~1IndexPrefetcher~1prefetch(_:)\/title","value":"prefetch:","op":"replace"},{"path":"\/references\/doc:~1~1onevideo.OVKit~1documentation~1OVKit~1IndexPrefetcher~1prefetch(_:)\/fragments","op":"replace","value":[{"text":"- ","kind":"text"},{"kind":"identifier","text":"prefetch:"}]},{"op":"replace","path":"\/references\/doc:~1~1onevideo.OVKit~1documentation~1OVKit~1IndexPrefetcher~1cancel(_:)\/title","value":"cancel:"},{"value":[{"kind":"text","text":"- "},{"text":"cancel:","kind":"identifier"}],"path":"\/references\/doc:~1~1onevideo.OVKit~1documentation~1OVKit~1IndexPrefetcher~1cancel(_:)\/fragments","op":"replace"}]}]}